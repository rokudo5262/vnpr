jQuery(document).ready(function(e){"use strict";e("body").on("submit.mailster","form.mailster-ajax-form",function(s){s.preventDefault();var r=e(this),i=r.serialize(),t=e('<div class="mailster-form-info"></div>'),o;if(e.isFunction(window.mailster_pre_submit)){o=window.mailster_pre_submit.call(this,i);if(o===false)return false;if(typeof o!=="undefined")i=o}r.addClass("loading").find(".submit-button").prop("disabled",true);e.post(r.attr("action"),i,a,"JSON").fail(function(s,r,i){var t;try{t=e.parseJSON(s.responseText);if(!t.html){t={html:"There was an error with the response:<br><code>["+t.code+"] "+t.message+"</code>",success:false}}}catch(e){t={html:"There was an error while parsing the response:<br><code>"+s.responseText+"</code>",success:false}}a(t);if(console)console.error(s.responseText)});function a(s){r.removeClass("loading has-errors").find("div.mailster-wrapper").removeClass("error");r.find(".mailster-form-info").remove();if(e.isFunction(window.mailster_post_submit)){o=window.mailster_post_submit.call(r[0],s);if(o===false)return false;if(typeof o!=="undefined")s=o}r.find(".submit-button").prop("disabled",false);if(s.html)t.html(s.html);if(e(document).scrollTop()<r.offset().top){t.prependTo(r)}else{t.appendTo(r)}if(s.success){if(!r.is(".is-profile"))r.find(".mailster-form-fields").slideUp(100).find(".mailster-wrapper").find(":input").prop("disabled",true).filter(".input").val("");s.redirect?location.href=s.redirect:t.show().addClass("success")}else{if(s.fields)e.each(s.fields,function(e){r.addClass("has-errors").find(".mailster-"+e+"-wrapper").addClass("error")});t.show().addClass("error")}}})});