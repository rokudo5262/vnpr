mailster=function(i,n,e,t){"use strict";i.conditions=i.conditions||{};n.each(n(".mailster-conditions"),function(){var e=n(this),t=e.find(".mailster-conditions-wrap"),o=e.find(".mailster-condition-group"),a=e.find(".mailster-condition");o.eq(0).appendTo(e.find(".mailster-condition-container"));!n.trim(t.html())&&t.empty();d();e.on("click",".add-condition",function(){var i=o.length,r=o.eq(0).clone();r.removeAttr("id").appendTo(t).data("id",i).show();n.each(r.find("input, select"),function(){var e=n(this),t=e.attr("name");e.attr("name",t.replace(/\[\d+\]/,"["+i+"]")).prop("disabled",false)});r.find(".condition-field").val("").focus();d();o=e.find(".mailster-condition-group");a=e.find(".mailster-condition")}).on("click",".add-or-condition",function(){var i=n(this).parent(),t=i.find(".mailster-condition").last().data("id"),o=a.eq(0).clone();o.removeAttr("id").appendTo(i).data("id",++t);n.each(o.find("input, select"),function(){var e=n(this),o=e.attr("name");e.attr("name",o.replace(/\[\d+\]\[\d+\]/,"["+i.data("id")+"]["+t+"]")).prop("disabled",false)});o.find(".condition-field").val("").focus();d();a=e.find(".mailster-condition")});t.on("click",".remove-condition",function(){var e=n(this).parent();if(e.parent().find(".mailster-condition").length==1){e=e.parent()}e.slideUp(100,function(){n(this).remove();i.trigger("updateCount")})}).on("change",".condition-field",function(){var e=n(this).closest(".mailster-condition"),t=n(this).val(),o,a;e.find("div.mailster-conditions-value-field").removeClass("active").find(".condition-value").prop("disabled",true);e.find("div.mailster-conditions-operator-field").removeClass("active").find(".condition-operator").prop("disabled",true);a=e.find('div.mailster-conditions-value-field[data-fields*=",'+t+',"]').addClass("active").find(".condition-value").prop("disabled",false);o=e.find('div.mailster-conditions-operator-field[data-fields*=",'+t+',"]').addClass("active").find(".condition-operator").prop("disabled",false);if(!a.length){a=e.find("div.mailster-conditions-value-field-default").addClass("active").find(".condition-value").prop("disabled",false)}if(!o.length){o=e.find("div.mailster-conditions-operator-field-default").addClass("active").find(".condition-operator").prop("disabled",false)}if(!a.val()){if(a.is(".hasDatepicker")){a.datepicker("setDate","yy-mm-dd")}}i.trigger("updateCount")}).on("change",".condition-operator",function(){i.trigger("updateCount")}).on("change",".condition-value",function(){i.trigger("updateCount")}).on("click",".mailster-condition-add-multiselect",function(){n(this).parent().clone().insertAfter(n(this).parent()).find(".condition-value").select().focus();return false}).on("click",".mailster-condition-remove-multiselect",function(){n(this).parent().remove();i.trigger("updateCount");return false}).on("change",".mailster-conditions-value-field-multiselect > .condition-value",function(){if(0==n(this).val()&&n(this).parent().parent().find(".condition-value").size()>1)n(this).parent().remove()}).on("click",".mailster-rating > span",function(i){var e=n(this),t=e.prevAll(),o=e.siblings();o.removeClass("enabled");t.add(e).addClass("enabled");e.parent().parent().find(".condition-value").val((t.length+1)/5).trigger("change")}).find(".condition-field").prop("disabled",false).trigger("change");i.trigger("updateCount");function d(){t.find(".datepicker").datepicker({dateFormat:"yy-mm-dd",firstDay:i.l10n.conditions.start_of_week,showWeek:true,dayNames:i.l10n.conditions.day_names,dayNamesMin:i.l10n.conditions.day_names_min,monthNames:i.l10n.conditions.month_names,prevText:i.l10n.conditions.prev,nextText:i.l10n.conditions.next,showAnim:"fadeIn"})}});return i}(mailster||{},jQuery,window,document);